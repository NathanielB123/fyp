% Inspired by Lo√Øc Pujet's thesis

%\mdfsetup{skipabove=\topskip,skipbelow=0pt}
\mdfdefinestyle{kaoboxstyle}{
	skipabove=1.5\topskip,
	skipbelow=.5\topskip,
	rightmargin=0pt,
	leftmargin=0pt,
	innertopmargin=12pt,
	%innerbottommargin=3pt,
	innerrightmargin=7pt,
	innerleftmargin=7pt,
	topline=false,
	bottomline=false,
	rightline=false,
	leftline=false,
	%linewidth=1pt,
	%roundcorner=0pt,
	%font={},
	%frametitlefont={},
	frametitlerule=true,
	linecolor=black,
	%backgroundcolor=LightBlue,
	fontcolor=black,
	%frametitlebackgroundcolor=LightBlue,
}

\definecolor{figmablue}{rgb}{0.91, 0.95, 0.98} 
\definecolor{figmagreen}{rgb}{0.95, 0.98, 0.91}
% TODO: I don't think this colour is quite right...
\definecolor{figmaorange}{rgb}{1.0, 0.96, 0.91}

\newmdenv[
	style=kaoboxstyle,
	backgroundcolor=figmagreen,
	frametitlebackgroundcolor=figmagreen,
]{remarkbox}

\newmdenv[
	style=kaoboxstyle,
	backgroundcolor=figmaorange,
	frametitlebackgroundcolor=figmaorange,
]{remarkbox2}

\NewDocumentCommand\sideremark{ o m }{%
	\marginnote[#1]{\begin{remarkbox}#2\end{remarkbox}}
}%

\NewDocumentCommand\remarknote{ o o m }{%
	\IfNoValueOrEmptyTF{#1}{%
		\refstepcounter{sidenote}% This command has been moved here
	}{%
	}%
	\sidenotemark[#1]{\kern-3pt}%
	\marginnote[#2]{\begin{remarkbox2}\thesidenote: #3\end{remarkbox2}}
}

\NewDocumentCommand\sidedef{ o m m }{%
  \marginnote[#1]{
		\begin{definition}[#2] \phantom{a}\\
			#3
		\end{definition}
	}
}
		
    % \begin{kaobox}[
    %   frametitle=Definition: #2,
    %   backgroundcolor=figmablue,
    %   frametitlebackgroundcolor=figmablue
    % ]
    %  #3
    % \end{kaobox}